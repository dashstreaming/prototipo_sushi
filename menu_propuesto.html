<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sushi Elegante - Pedidos</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500&display=swap" rel="stylesheet">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: {
                            500: '#28a745',
                            600: '#218838',
                        },
                        dark: {
                            700: '#2c3e50',
                            800: '#1a252f',
                            900: '#161b22',
                        }
                    },
                    fontFamily: {
                        sans: ['Poppins', 'sans-serif'],
                    },
                }
            }
        }
    </script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        .sushi-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
        }
        .modal-overlay {
            background-color: rgba(0, 0, 0, 0.7);
        }
        .checkbox-custom:checked {
            background-color: #1E3A8A;
            border-color: #1E3A8A;
        }
        .radio-custom:checked {
            background-color: #1E3A8A;
            border-color: #1E3A8A;
        }
    </style>
</head>
<body class="bg-gray-50">
    <!-- Header -->
    <header class="bg-dark-900 text-white shadow-lg sticky top-0 z-40">
        <div class="container mx-auto px-4 py-6">
            <div class="flex justify-between items-center">
                <div class="flex items-center space-x-2">
                    <i class="fas fa-fish text-2xl"></i>
                    <h1 class="text-2xl font-bold">Sushi Elegante</h1>
                </div>
                <div class="flex items-center space-x-6">
                    <button onclick="openCartDrawer()" class="relative hover:text-gray-300">
                        <i class="fas fa-shopping-cart"></i>
                        <span id="cart-count" class="absolute -top-2 -right-3 bg-primary-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center">0</span>
                    </button>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="container mx-auto px-4 py-8">
        <div class="mb-8 text-center">
            <h2 class="text-3xl font-medium text-dark-700 mb-2">Nuestros Rolls Exclusivos</h2>
            <p class="text-gray-600 font-light max-w-2xl mx-auto">Selecciona tu sushi favorito y personalízalo a tu gusto</p>
        </div>

        <!-- Sushi Grid -->
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
            <!-- Sushi Item 1 -->
            <div class="bg-white rounded-lg overflow-hidden shadow-md sushi-card transition duration-300">
                <img src="https://images.unsplash.com/photo-1579584425555-c3ce17fd4351?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=600&q=80" alt="Roll California" class="w-full h-48 object-cover">
                <div class="p-6">
                    <h3 class="text-xl font-medium text-dark-700 mb-2">Roll California</h3>
                    <p class="text-gray-600 font-light mb-4">Cangrejo, pepino y aguacate envuelto en arroz y sésamo.</p>
                    <div class="flex justify-between items-center">
                        <span class="text-primary-500 font-medium text-lg">$12.990</span>
                        <button onclick="openModal('Roll California', 12990, 'california')" class="bg-dark-700 hover:bg-dark-800 text-white px-4 py-2 rounded-lg transition duration-300 font-medium">
                            Añadir al carrito
                        </button>
                    </div>
                </div>
            </div>

            <!-- Sushi Item 2 -->
            <div class="bg-white rounded-lg overflow-hidden shadow-md sushi-card transition duration-300">
                <img src="https://images.unsplash.com/photo-1617196035154-1e7e6e28b0db?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=600&q=80" alt="Roll Tempura" class="w-full h-48 object-cover">
                <div class="p-6">
                    <h3 class="text-xl font-medium text-dark-700 mb-2">Roll Tempura</h3>
                    <p class="text-gray-600 mb-4">Camarón tempura, aguacate y salsa especial.</p>
                    <div class="flex justify-between items-center">
                        <span class="text-primary-500 font-medium text-lg">$14.990</span>
                        <button onclick="openModal('Roll Tempura', 14990, 'tempura')" class="bg-dark-700 hover:bg-dark-800 text-white px-4 py-2 rounded-lg transition duration-300 font-medium">
                            Añadir al carrito
                        </button>
                    </div>
                </div>
            </div>

            <!-- Sushi Item 3 -->
            <div class="bg-white rounded-lg overflow-hidden shadow-md sushi-card transition duration-300">
                <img src="https://images.unsplash.com/photo-1611270632004-d7b17f4993f5?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=600&q=80" alt="Roll Salmón" class="w-full h-48 object-cover">
                <div class="p-6">
                    <h3 class="text-xl font-medium text-dark-700 mb-2">Roll Salmón</h3>
                    <p class="text-gray-600 mb-4">Salmón fresco, queso crema y cebollín.</p>
                    <div class="flex justify-between items-center">
                        <span class="text-primary-500 font-medium text-lg">$15.990</span>
                        <button onclick="openModal('Roll Salmón', 15990, 'salmon')" class="bg-dark-700 hover:bg-dark-800 text-white px-4 py-2 rounded-lg transition duration-300 font-medium">
                            Añadir al carrito
                        </button>
                    </div>
                </div>
            </div>

            <!-- Sushi Item 4 -->
            <div class="bg-white rounded-lg overflow-hidden shadow-md sushi-card transition duration-300">
                <img src="https://images.unsplash.com/photo-1611143669185-af224c5e3252?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=600&q=80" alt="Roll Vegetariano" class="w-full h-48 object-cover">
                <div class="p-6">
                    <h3 class="text-xl font-medium text-dark-700 mb-2">Roll Vegetariano</h3>
                    <p class="text-gray-600 mb-4">Pepino, zanahoria, palta y pimiento rojo.</p>
                    <div class="flex justify-between items-center">
                        <span class="text-primary-500 font-medium text-lg">$10.990</span>
                        <button onclick="openModal('Roll Vegetariano', 10990, 'vegetariano')" class="bg-dark-700 hover:bg-dark-800 text-white px-4 py-2 rounded-lg transition duration-300 font-medium">
                            Añadir al carrito
                        </button>
                    </div>
                </div>
            </div>

            <!-- Sushi Item 5 -->
            <div class="bg-white rounded-lg overflow-hidden shadow-md sushi-card transition duration-300">
                <img src="https://images.unsplash.com/photo-1617196901659-b0c9188e3f7f?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=600&q=80" alt="Roll Picante" class="w-full h-48 object-cover">
                <div class="p-6">
                    <h3 class="text-xl font-medium text-dark-700 mb-2">Roll Picante</h3>
                    <p class="text-gray-600 mb-4">Atún picante, cebollín y salsa de chile.</p>
                    <div class="flex justify-between items-center">
                        <span class="text-primary-500 font-medium text-lg">$13.990</span>
                        <button onclick="openModal('Roll Picante', 13990, 'picante')" class="bg-dark-700 hover:bg-dark-800 text-white px-4 py-2 rounded-lg transition duration-300 font-medium">
                            Añadir al carrito
                        </button>
                    </div>
                </div>
            </div>

            <!-- Sushi Item 6 -->
            <div class="bg-white rounded-lg overflow-hidden shadow-md sushi-card transition duration-300">
                <img src="https://images.unsplash.com/photo-1611273426858-450d8e3c9fce?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=600&q=80" alt="Roll Dragon" class="w-full h-48 object-cover">
                <div class="p-6">
                    <h3 class="text-xl font-medium text-dark-700 mb-2">Roll Dragón</h3>
                    <p class="text-gray-600 mb-4">Camarón tempura, anguila y aguacate.</p>
                    <div class="flex justify-between items-center">
                        <span class="text-primary-500 font-medium text-lg">$16.990</span>
                        <button onclick="openModal('Roll Dragón', 16990, 'dragon')" class="bg-dark-700 hover:bg-dark-800 text-white px-4 py-2 rounded-lg transition duration-300 font-medium">
                            Añadir al carrito
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Modal -->
    <div id="sushi-modal" class="fixed inset-0 z-50 flex items-center justify-center hidden modal-overlay">
        <div class="bg-white rounded-lg shadow-xl w-full max-w-md mx-4 max-h-[90vh] overflow-y-auto">
            <div class="p-6">
                <div class="flex justify-between items-center mb-4">
                    <h3 id="modal-title" class="text-2xl font-medium text-dark-700"></h3>
                    <button onclick="closeModal()" class="text-gray-500 hover:text-gray-700">
                        <i class="fas fa-times"></i>
                    </button>
                </div>

                <div class="mb-6">
                    <h4 class="text-lg font-semibold text-gray-700 mb-3">Complementos obligatorios</h4>
                    <div class="space-y-3">
                        <div class="flex items-center">
                            <input type="radio" name="sauce" id="soy-sauce" value="Salsa de soja" class="w-4 h-4 text-indigo-600 border-gray-300 focus:ring-indigo-500 radio-custom" checked>
                            <label for="soy-sauce" class="ml-3 block text-gray-700">Salsa de soja</label>
                        </div>
                        <div class="flex items-center">
                            <input type="radio" name="sauce" id="teriyaki-sauce" value="Salsa teriyaki" class="w-4 h-4 text-indigo-600 border-gray-300 focus:ring-indigo-500 radio-custom">
                            <label for="teriyaki-sauce" class="ml-3 block text-gray-700">Salsa teriyaki</label>
                        </div>
                        <div class="flex items-center">
                            <input type="radio" name="sauce" id="spicy-sauce" value="Salsa picante" class="w-4 h-4 text-indigo-600 border-gray-300 focus:ring-indigo-500 radio-custom">
                            <label for="spicy-sauce" class="ml-3 block text-gray-700">Salsa picante</label>
                        </div>
                    </div>
                </div>

                <div class="mb-6">
                    <h4 class="text-lg font-semibold text-gray-700 mb-3">Complementos adicionales (+$)</h4>
                    <div class="space-y-3">
                        <div class="flex items-center justify-between">
                            <div class="flex items-center">
                                <input type="checkbox" id="extra-ginger" value="Jengibre extra (+$1.000)" class="w-4 h-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500 checkbox-custom">
                                <label for="extra-ginger" class="ml-3 block text-gray-700">Jengibre extra</label>
                            </div>
                            <span class="text-gray-600">+$1.000</span>
                        </div>
                        <div class="flex items-center justify-between">
                            <div class="flex items-center">
                                <input type="checkbox" id="wasabi-extra" value="Wasabi extra (+$800)" class="w-4 h-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500 checkbox-custom">
                                <label for="wasabi-extra" class="ml-3 block text-gray-700">Wasabi extra</label>
                            </div>
                            <span class="text-gray-600">+$800</span>
                        </div>
                        <div class="flex items-center justify-between">
                            <div class="flex items-center">
                                <input type="checkbox" id="sesame-seeds" value="Semillas de sésamo (+$500)" class="w-4 h-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500 checkbox-custom">
                                <label for="sesame-seeds" class="ml-3 block text-gray-700">Semillas de sésamo</label>
                            </div>
                            <span class="text-gray-600">+$500</span>
                        </div>
                        <div class="flex items-center justify-between">
                            <div class="flex items-center">
                                <input type="checkbox" id="extra-avocado" value="Aguacate extra (+$1.500)" class="w-4 h-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500 checkbox-custom">
                                <label for="extra-avocado" class="ml-3 block text-gray-700">Aguacate extra</label>
                            </div>
                            <span class="text-gray-600">+$1.500</span>
                        </div>
                    </div>
                </div>

                <div class="mb-6">
                    <h4 class="text-lg font-semibold text-gray-700 mb-3">Notas de entrega</h4>
                    <textarea id="delivery-notes" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500" rows="3" placeholder="Ej: Sin cebolla, entregar en portería, etc."></textarea>
                </div>

                <div class="flex justify-between items-center mb-4">
                    <span class="text-lg font-semibold">Total:</span>
                    <span id="modal-total" class="text-xl font-bold text-indigo-600"></span>
                </div>

                <div class="flex space-x-4">
                    <button onclick="closeModal()" class="flex-1 bg-gray-200 hover:bg-gray-300 text-gray-800 py-2 px-4 rounded-lg transition duration-300">
                        Cancelar
                    </button>
                    <button onclick="addToCart()" class="flex-1 bg-dark-700 hover:bg-dark-800 text-white py-2 px-4 rounded-lg transition duration-300">
                        Añadir al carrito
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Cart Drawer -->
    <div id="cart-drawer" class="fixed inset-0 z-50 flex justify-end">
        <div class="absolute inset-0 bg-black bg-opacity-50 opacity-0 transition-opacity duration-300" onclick="closeCartDrawer()"></div>
        <div class="bg-white w-full max-w-md h-full shadow-xl overflow-y-auto transform translate-x-full transition-transform duration-300">
            <div class="p-6">
                <div class="flex justify-between items-center mb-6">
                    <h3 class="text-2xl font-medium text-dark-700">Tu Carrito</h3>
                    <button onclick="closeCartDrawer()" class="text-gray-500 hover:text-gray-700">
                        <i class="fas fa-times"></i>
                    </button>
                </div>

                <div id="cart-items-container" class="space-y-4 mb-6">
                    <!-- Cart items will be dynamically inserted here -->
                </div>

                <div class="border-t border-gray-200 pt-4 mb-6">
                    <div class="flex justify-between text-lg font-medium text-dark-700 mb-2">
                        <span>Subtotal:</span>
                        <span id="cart-subtotal">$0</span>
                    </div>
                </div>

                <div class="flex space-x-4">
                    <button onclick="closeCartDrawer()" class="flex-1 bg-gray-200 hover:bg-gray-300 text-gray-800 py-2 px-4 rounded-lg transition duration-300">
                        Seguir comprando
                    </button>
                    <button onclick="checkout()" class="flex-1 bg-primary-500 hover:bg-primary-600 text-white py-2 px-4 rounded-lg transition duration-300">
                        Ir al checkout
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Cart Toast -->
    <div id="cart-toast" class="fixed bottom-4 right-4 bg-primary-500 text-white px-6 py-3 rounded-lg shadow-lg transform translate-y-10 opacity-0 transition-all duration-300 flex items-center">
        <i class="fas fa-check-circle mr-2"></i>
        <span>¡Producto añadido al carrito!</span>
    </div>

    <script>
        let currentItem = null;
        let currentPrice = 0;
        let currentId = '';

        function openModal(name, price, id) {
            currentItem = name;
            currentPrice = price;
            currentId = id;
            
            document.getElementById('modal-title').textContent = name;
            document.getElementById('modal-total').textContent = `$${price.toLocaleString('es-CL')}`;
            document.getElementById('sushi-modal').classList.remove('hidden');
            document.body.classList.add('overflow-hidden');
        }

        function closeModal() {
            document.getElementById('sushi-modal').classList.add('hidden');
            document.body.classList.remove('overflow-hidden');
            resetModal();
        }

        function resetModal() {
            document.getElementById('soy-sauce').checked = true;
            document.querySelectorAll('input[type="checkbox"]').forEach(checkbox => {
                checkbox.checked = false;
            });
            document.getElementById('delivery-notes').value = '';
            currentItem = null;
            currentPrice = 0;
            currentId = '';
        }

        function calculateTotal() {
            let total = currentPrice;
            
            // Check additional items
            if (document.getElementById('extra-ginger').checked) total += 1000;
            if (document.getElementById('wasabi-extra').checked) total += 800;
            if (document.getElementById('sesame-seeds').checked) total += 500;
            if (document.getElementById('extra-avocado').checked) total += 1500;
            
            document.getElementById('modal-total').textContent = `$${total.toLocaleString('es-CL')}`;
            return total;
        }

        // Add event listeners to checkboxes to update total
        document.querySelectorAll('input[type="checkbox"]').forEach(checkbox => {
            checkbox.addEventListener('change', calculateTotal);
        });

        function addToCart() {
            if (!currentItem) return;
            
            // Get selected options
            const sauce = document.querySelector('input[name="sauce"]:checked').value;
            const extras = [];
            document.querySelectorAll('input[type="checkbox"]:checked').forEach(checkbox => {
                extras.push(checkbox.value);
            });
            const notes = document.getElementById('delivery-notes').value;
            const total = calculateTotal();
            
            // Create cart item object
            const cartItem = {
                id: currentId,
                name: currentItem,
                basePrice: currentPrice,
                sauce,
                extras,
                notes,
                total
            };
            
            // Add to cart (in a real app, you'd use localStorage or a state management solution)
            let cart = JSON.parse(localStorage.getItem('sushiCart')) || [];
            cart.push(cartItem);
            localStorage.setItem('sushiCart', JSON.stringify(cart));
            
            // Update cart count
            updateCartCount();
            
            // Show toast
            showToast();
            
            // Close modal
            closeModal();
        }

        function updateCartCount() {
            const cart = JSON.parse(localStorage.getItem('sushiCart')) || [];
            document.getElementById('cart-count').textContent = cart.length;
        }

        function showToast() {
            const toast = document.getElementById('cart-toast');
            toast.classList.remove('translate-y-10', 'opacity-0');
            toast.classList.add('translate-y-0', 'opacity-100');
            
            setTimeout(() => {
                toast.classList.remove('translate-y-0', 'opacity-100');
                toast.classList.add('translate-y-10', 'opacity-0');
            }, 3000);
        }

        // Initialize cart count on page load
        document.addEventListener('DOMContentLoaded', updateCartCount);

        function openCartDrawer() {
            const cart = JSON.parse(localStorage.getItem('sushiCart')) || [];
            const container = document.getElementById('cart-items-container');
            const subtotal = document.getElementById('cart-subtotal');
            
            container.innerHTML = '';
            let total = 0;
            
            if (cart.length === 0) {
                container.innerHTML = '<p class="text-gray-600">Tu carrito está vacío</p>';
            } else {
                cart.forEach(item => {
                    const itemElement = document.createElement('div');
                    itemElement.className = 'flex items-start border-b border-gray-100 pb-4';
                    itemElement.innerHTML = `
                        <img src="https://images.unsplash.com/photo-${getImageForItem(item.id)}?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=200&q=80" 
                             alt="${item.name}" class="w-16 h-16 object-cover rounded">
                        <div class="ml-4 flex-1">
                            <div class="flex justify-between">
                                <h4 class="font-medium text-dark-700">${item.name}</h4>
                                <button onclick="removeFromCart(${cart.indexOf(item)})" class="text-red-500 hover:text-red-700">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </div>
                            <p class="text-primary-500">${item.total.toLocaleString('es-CL')}</p>
                            <p class="text-sm text-gray-500">${item.sauce}</p>
                        </div>
                    `;
                    container.appendChild(itemElement);
                    total += item.total;
                });
            }
            
            subtotal.textContent = `${total.toLocaleString('es-CL')}`;
            
            const drawer = document.getElementById('cart-drawer');
            drawer.classList.remove('hidden');
            setTimeout(() => {
                drawer.querySelector('div:first-child').classList.add('opacity-100');
                drawer.querySelector('div:last-child').classList.remove('translate-x-full');
            }, 10);
            document.body.classList.add('overflow-hidden');
        }

        function closeCartDrawer() {
            const drawer = document.getElementById('cart-drawer');
            drawer.querySelector('div:first-child').classList.remove('opacity-100');
            drawer.querySelector('div:last-child').classList.add('translate-x-full');
            
            setTimeout(() => {
                drawer.classList.add('hidden');
                document.body.classList.remove('overflow-hidden');
            }, 300);
        }

        function getImageForItem(id) {
            // Return different image IDs based on item ID
            const images = {
                'california': '1579584425555-c3ce17fd4351',
                'tempura': '1617196035154-1e7e6e28b0db',
                'salmon': '1611270632004-d7b17f4993f5',
                'vegetariano': '1611143669185-af224c5e3252',
                'picante': '1617196901659-b0c9188e3f7f',
                'dragon': '1611273426858-450d8e3c9fce'
            };
            return images[id] || '1579584425555-c3ce17fd4351';
        }

        function checkout() {
            // In a real app, this would redirect to checkout page
            alert('Redirigiendo al checkout...');
            closeCartDrawer();
        }

        function removeFromCart(index) {
            let cart = JSON.parse(localStorage.getItem('sushiCart')) || [];
            if (index >= 0 && index < cart.length) {
                cart.splice(index, 1);
                localStorage.setItem('sushiCart', JSON.stringify(cart));
                updateCartCount();
                openCartDrawer(); // Refresh the cart view
            }
        }
    </script>
</body>
</html>
